<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             xmlns:vm="clr-namespace:TourBuddy.ViewModels"
             x:Class="TourBuddy.Views.AlarmPage"
             x:DataType="vm:AlarmViewModel"
             Title="Set Alarm">

    <ScrollView>
        <VerticalStackLayout Padding="20" Spacing="20">

            <!-- Alarm Title Section -->
            <Frame BackgroundColor="{AppThemeBinding Light={StaticResource Primary}, Dark={StaticResource Gray950}}"
                   Padding="15"
                   CornerRadius="12"
                   HasShadow="True"
                   Margin="0,10,0,10">
                <VerticalStackLayout>
                    <Label Text="Set Your Alarm" 
                           FontSize="26" 
                           FontAttributes="Bold" 
                           TextColor="White" 
                           HorizontalOptions="Center" />
                </VerticalStackLayout>
            </Frame>

            <!-- Alarm Time Section -->
            <Frame Padding="15" CornerRadius="12" HasShadow="True">
                <VerticalStackLayout>
                    <Label Text="Set Alarm Time" 
                           FontSize="18" 
                           FontAttributes="Bold" 
                           HorizontalOptions="Center" />
                    <TimePicker Time="{Binding AlarmTime}" />
                </VerticalStackLayout>
            </Frame>

            <!-- Alarm Label Section -->
            <Frame Padding="15" CornerRadius="12" HasShadow="True">
                <VerticalStackLayout>
                    <Label Text="Alarm Label" 
                           FontSize="18" 
                           FontAttributes="Bold" 
                           HorizontalOptions="Center" />
                    <Entry Text="{Binding AlarmLabel}" 
                           Placeholder="Enter Alarm Label" 
                           FontSize="16" />
                </VerticalStackLayout>
            </Frame>


            <!-- Sound Picker + Upload -->
            <Frame Padding="15" CornerRadius="10" HasShadow="True">
                <VerticalStackLayout Spacing="10">
                    <Label Text="Select or Upload Sound"
                           FontSize="18"
                           FontAttributes="Bold"
                           HorizontalOptions="Center" />

                    <Picker ItemsSource="{Binding AvailableSounds}"
                            SelectedItem="{Binding SelectedSound}" />

                    <Button Text="Upload MP3"
                            Command="{Binding UploadSoundCommand}"
                            BackgroundColor="#0D2B44"
                            TextColor="White" />

                    <!-- Music Player-like UI -->
                    <Frame BackgroundColor="{AppThemeBinding Light={StaticResource Gray500Brush}, Dark={StaticResource Gray950}}"
                           CornerRadius="8"
                           HasShadow="False"
                           Padding="10">
                        <Grid ColumnDefinitions="*, Auto, Auto">
                            <!-- Save Button -->
                             <Button Text="Save Alarm"
                                Command="{Binding SaveAlarmCommand}"
                                BackgroundColor="#17A085"
                                TextColor="White"
                                WidthRequest="80"
                                HeightRequest="40"
                                CornerRadius="20"
                                Grid.Column="0"
                                Margin="5,0" />

                                <!--<Label Text="{Binding SelectedSound}"
                               FontSize="14"
                               VerticalOptions="Center"
                               HorizontalOptions="StartAndExpand"
                               Grid.Column="0"
                               LineBreakMode="TailTruncation" />-->

                            <Button Text="Play"
                                Command="{Binding PlaySoundCommand}"
                                BackgroundColor="#E0F4FF"
                                TextColor="White"
                                WidthRequest="80"
                                HeightRequest="40"
                                CornerRadius="20"
                                Grid.Column="1"
                                Margin="5,0" />

                            <Button Text="Stop"
                                Command="{Binding StopSoundCommand}"
                                BackgroundColor="Crimson"
                                TextColor="White"
                                WidthRequest="80"
                                HeightRequest="40"
                                CornerRadius="20"
                                Grid.Column="2"
                                Margin="5,0" />
                        </Grid>
                    </Frame>

                </VerticalStackLayout>
            </Frame>
            <!-- Save Button -->
            <!--<Button Text="Save Alarm" 
                    Command="{Binding SaveAlarmCommand}" 
                    BackgroundColor="Green" 
                    TextColor="White" 
                    Margin="0,20,0,0" 
                    HeightRequest="50" 
                    CornerRadius="10"/>-->

            <!-- Cancel Button -->
            <Button Text="Cancel" 
                    Command="{Binding CancelCommand}" 
                    BackgroundColor="Transparent" 
                    TextColor="{AppThemeBinding Light={StaticResource Primary}, Dark={StaticResource White}}"
                    Margin="0,10,0,0" 
                    HeightRequest="50" 
                    CornerRadius="10" />

        </VerticalStackLayout>
    </ScrollView>
</ContentPage>
